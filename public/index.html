<html>
<head>
    <script src="./js/jquery.js"></script>
    <link href="./css/template.css" rel = "stylesheet">
    <script src="js/chatbotbot.js"></script>
</head>
<body>
<section class="msger">
     <header class="msger-header">
      <div class="msger-header-title">
      <i class="fas fa-comment-alt"></i> TourBot
     </div>
     <div class="msger-header-options">
      <span><i class="fas fa-cog"></i></span>
     </div>
     </header>
     <main class="msger-chat">
        <div class="msg left-msg">
          <div
           class="msg-img"
           style="background-image: url(https://image.flaticon.com/icons/svg/327/327779.svg)"
          ></div>
    
          <div class="msg-bubble">
            <div class="msg-info">
              <div class="msg-info-name">Jackslov</div>
              <div class="msg-info-time" id = "firstMSGTime"></div>
            </div>
    
            <div class="msg-text">
              I am your travel assisstant, where do you wish to go today ? ðŸ˜„
            </div>
          </div>
        </div>
     </main>
    <form class = "msger-inputarea" id="chatForm">
        <input type="text" class="msger-input" placeholder="Enter your message..." id = "msg">
        <button type="submit" class="msger-send-btn" id = "sendBtn">Send</button>
    </form>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const sendBtn = document.getElementById("sendBtn");
            const msgInput = document.querySelector(".msger-input");

            sendBtn.addEventListener("click", function(e) {
                e.preventDefault();
                const msgText = msgInput.value.trim();

                if (msgText !== "") {
                    appendMessage(PERSON_NAME, PERSON_IMG, "right", msgText);

                    botResponse();
                    msgInput.value = "";
                }
            })

            //Establishing the time for the starting message and all following ones
            const firstMSGTime = document.getElementById("firstMSGTime");
            firstMSGTime.textContent = getCurrentTime(); //Function just later.
        });

        // Since this template features Timed messages, these functions will help us implement it (done with some Help since I realised System.time doesn't work here)
        function getCurrentTime() {
            const date = new Date();
            const hours = date.getHours(); //This template was presented with hours and minutes in mind, so we will implement it that way.
            const mins = date.getMinutes();
            return formatTime(hours, minutes);
        }

        function formatTime() {
            const amPm = hours >= 12 ? 'PM' : 'AM';
            const formattedHours = hours % 12 === 0 ? 12 : hours % 12;
            const formattedMinutes = String(minutes).padStart(2, '0');
            return `${formattedHours}:${formattedMinutes} ${amPm}`;
        }
    </script>
    <script src = "js/chatbotbot.js"></script>
    </section>
    </body>
</html>
